<div class="container">
  <h3 class="title-text">{{ this.cache.currentMetadata().result_title }}</h3>
  <br />

  <div class="card-container">
    <div class="content-section">
      <div class="card-content first-column">
        <div class="card-title">ALLIANCE ALIGNMENT</div>
        <div class="form-container">
          <div>
            <app-multiselect
              label="Projects*"
              [signal]="body"
              optionLabel="select_label"
              optionValue="contract_id"
              signalOptionValue="contracts"
              serviceName="contracts">
              <ng-template #rows let-contract>
                <div class="item-content">
                  <div class="information">
                    <div class="row">
                      <div class="project">
                        <strong>{{ contract.agreement_id }}</strong> - {{ contract.description }}
                      </div>
                      <div class="project-info">
                        <div class="project-lead">
                          <h4>Project lead</h4>
                          &nbsp; <span class="material-symbols-rounded"> arrow_forward </span>&nbsp;
                          <span class="project-data">{{ contract.project_lead_description }}</span>
                        </div>
                        <div class="start-date">
                          <span class="project-title">Start Date</span>
                          <span class="material-symbols-rounded"> arrow_forward </span>
                          <label class="project-data" for="username">{{ contract.start_date | date: 'dd/MM/yyyy' }}</label>
                        </div>
                        <div class="end-date">
                          <span class="project-title">End Date</span>
                          <span class="material-symbols-rounded"> arrow_forward </span>
                          <label class="project-data" for="username">{{ contract.end_date | date: 'dd/MM/yyyy' }}</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <button class="primary-button row" [class]="{ active: contract.is_primary }" (click)="markAsPrimary(contract, 'contract')">
                    {{ contract.is_primary ? 'Primary' : 'Select as Primary' }} <i class="material-symbols-rounded">star</i>
                  </button>
                </div>
              </ng-template>
            </app-multiselect>
          </div>

          <div>
            <app-multiselect
              label="Levers*"
              [signal]="body"
              optionLabel="full_name"
              optionValue="lever_id"
              signalOptionValue="levers"
              [serviceName]="'levers'">
              <ng-template #rows let-lever>
                <div class="item-content">
                  <div class="information">
                    <strong>{{ lever.short_name }}&nbsp;</strong> - {{ lever.other_names }}
                  </div>
                  <button class="primary-button" [class]="{ active: lever.is_primary }" (click)="markAsPrimary(lever, 'lever')">
                    {{ lever.is_primary ? 'Primary' : 'Select as Primary' }} <i class="material-symbols-rounded">star</i>
                  </button>
                </div>
              </ng-template>
            </app-multiselect>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="button-container">
    <p-button label="Back" icon="pi pi-arrow-left" iconPos="left" (click)="saveData('back')" [loading]="this.loading()" />
    <p-button label="Next" icon="pi pi-arrow-right" iconPos="left" (click)="saveData('next')" [loading]="this.loading()" />
    <p-button label="Save" severity="success" icon="pi pi-save" iconPos="left" (click)="saveData()" [loading]="this.loading()" />
  </div>
</div>
